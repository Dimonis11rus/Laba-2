#include <iostream>
#include <locale>
#include <cstdio>
#include <cstring>
#include <windows.h>
#include <iomanip>
#define N 8

using namespace std;
HANDLE hConsoleHandle=GetStdHandle(STD_OUTPUT_HANDLE);

class SIGN
{

private:
    char *name;
    char *surname;
    char *zodiac_sign;
    int birthday[3];
public:
    SIGN()
    {
        name = new char [15];
        surname = new char [15];
        zodiac_sign = new char [15];

    }
    SIGN(const SIGN & arg)
    {
		name = new char [15];
        surname = new char [15];
        zodiac_sign = new char [15];
		for(int q=0; q<15; q++)
            name[q]=arg.name[q];
        for(int q=0; q<15; q++)
            surname[q]=arg.surname[q];
        for(int q=0; q<15; q++)
            zodiac_sign[q]=arg.zodiac_sign[q];
        for(int q=0; q<3; q++)
            birthday[q]=arg.birthday[q];
	}
    bool show(char *vv)
    {
        return !strcmp(zodiac_sign, vv);
    }
    friend bool Sort(SIGN, SIGN);
    friend ostream& operator << (ostream&, SIGN&);
    friend istream& operator >> (istream&, SIGN&);
    ~SIGN()
    {
        delete [] name;
        delete [] surname;
        delete [] zodiac_sign;
    }
};

bool Sort(SIGN frst, SIGN scnd)
{
    unsigned int a, b;
    a=frst.birthday[0]+frst.birthday[1]*30+frst.birthday[2]*365;
    b=scnd.birthday[0]+scnd.birthday[1]*30+scnd.birthday[2]*365;
    if(a>b)
        return true;
    else
        return false;
}

ostream& operator << (ostream& os, SIGN& sn)
{
    SetConsoleTextAttribute(hConsoleHandle, 9);
    os<<setw(12)<<sn.surname<<' ';
    os<<setw(10)<<sn.name;
    SetConsoleTextAttribute(hConsoleHandle, 14);
    os<<setw(10)<<sn.zodiac_sign<<setw(6);
    SetConsoleTextAttribute(hConsoleHandle, 4);
    os<<sn.birthday[0]<<'.';
    os<<sn.birthday[1]<<'.';
    os<<sn.birthday[2]<<"г."<<"\n\n";
    SetConsoleTextAttribute(hConsoleHandle, 15);
    return os;
}
istream& operator >> (istream& is, SIGN& sn)
{
    cout<<"Введите фамилию: ";
    is>>sn.surname;
    cout<<"Введите имя: ";
    is>>sn.name;
    cout<<"Введите знак зодиака: ";
    is>>sn.zodiac_sign;
    cout<<"Введите дату: ";
    is>>sn.birthday[0];
    cout<<"Введите месяц: ";
    is>>sn.birthday[1];
    cout<<"Введите год: ";
    is>>sn.birthday[2];
    cout<<"\n\n";
    return is;
}

int main()
{
    setlocale(LC_ALL, "rus");
    SIGN obj[N];
    int choise;
    for(int i=0; i<N; i++)
        cin>>obj[i];
    system("cls");
    SIGN buf;
    for(int i=0; i<N-1; i++)
    {
        for(int j=0; j<N-i-1; j++)
        {
            if(Sort(obj[j], obj[j+1])) {
                buf = obj[j];
                obj[j] = obj[j+1];
                obj[j+1] = buf;
            }
        }
    }
    while(1)
    {
        cout<<"1)Вывести все записи\n2)Вывести записи по знаку зодиака\n0)Выход\n>";
        cin>>choise;
        switch(choise)
        {
        case 1:
            for(int n=0; n<N; n++)
                cout<<obj[n];
            break;
        case 2:
            {
            cout<<"Введите знак зодиака: ";
            char zodiak[15];
            bool flag=0;
            cin>>zodiak;
            for(int i=0; i<N; i++)
            {
                if(obj[i].show(zodiak))
                {
                    cout<<obj[i];
                    flag=1;
                }
            }
            if(!flag)
                cout<<"\nЛюдей, с данным знаком зодиака, нет\n\n";
            break;
            }
        case 0: exit(1); break;
        }
        system("pause");
        system("cls");
    }
    return 0;
}
